{% extends "layout.html" %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="dashboard">
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Customer Panel</h2>
            <p>Welcome, {{ session.name }}</p>
        </div>
       <nav class="sidebar-nav">
            <ul>
                <li>
                    <a href="{{ url_for('customer_dashboard') }}">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('book_parcel') }}">
                        <i class="fas fa-box"></i>Book New Parcel
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('customer_parcels') }}">
                        <i class="fas fa-list"></i> My Parcels
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('customer_track') }}">
                        <i class="fas fa-map-marker-alt"></i> Track Parcel
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('customer_notifications') }}" class="active">
                        <i class="fas fa-bell"></i> Notifications
                        {% if notifications|selectattr('read', 'equalto', false)|list|length > 0 %}
                        <span class="notification-badge">
                            {{ notifications|selectattr('read', 'equalto', false)|list|length }}
                        </span>
                        {% endif %}
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('customer_profile') }}">
                        <i class="fas fa-user"></i> My Profile
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('logout') }}">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <main class="main-content">
        <h1>My Profile</h1>
        
        <div class="form-container" style="max-width: 600px;">
            <form action="{{ url_for('customer_profile') }}" method="POST">
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" class="form-control" 
                           value="{{ customer.name }}" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" class="form-control" 
                           value="{{ customer.email }}" disabled>
                    <small style="color: #666;">Email cannot be changed</small>
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone" class="form-control" 
                           value="{{ customer.phone }}" required>
                </div>
                
                <div class="form-group">
                    <label for="address">Pickup Address</label>
                    <textarea id="address" name="address" class="form-control" rows="3">
                        {{ customer.address or '' }}
                    </textarea>
                    <small style="color: #666;">This address will be used as pickup address for your parcels</small>
                </div>
                
                <button type="submit" class="btn btn-success" style="width: 100%;">
                    <i class="fas fa-save"></i> Update Profile
                </button>
            </form>
            
            <div style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 5px;">
                <h3 style="margin-bottom: 1rem;">Account Information</h3>
                <p><strong>Account Created:</strong> {{ customer.created_at.strftime('%Y-%m-%d') }}</p>
                <p><strong>User Role:</strong> {{ customer.role|title }}</p>
                <p><strong>Account Status:</strong> 
                    <span style="color: green;">Active</span>
                </p>
            </div>
        </div>
    </main>
</div>
{% endblock %}